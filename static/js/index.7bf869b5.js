(function(e){function t(t){for(var a,o,n=t[0],c=t[1],l=t[2],d=0,m=[];d<n.length;d++)o=n[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,n=1;n<s.length;n++){var c=s[n];0!==i[c]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},i={index:0},r=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/static/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var u=c;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"01b1":function(e,t,s){"use strict";s("647f")},"0378":function(e,t,s){"use strict";s("ff81")},"09a1":function(e,t,s){"use strict";s("83ec")},1158:function(e,t,s){},"12da":function(e,t,s){"use strict";s("7636")},"25fa":function(e,t,s){},"29b6":function(e,t,s){"use strict";s("bfb8")},"2b52":function(e,t,s){},3819:function(e,t,s){"use strict";s("e431")},"3b8f":function(e,t,s){"use strict";s("c4f0")},"3ce8":function(e,t,s){"use strict";s("aa20")},"41bf":function(e,t,s){},4775:function(e,t,s){"use strict";s("73c0")},"4de3":function(e,t,s){},"4f9d":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("router-view")],1)},r=[],o=s("5530"),n=s("2f62"),c={mounted:function(){window.addEventListener("click",this.closeDropDown)},computed:Object(o["a"])({},Object(n["b"])("dropdown",["isOpen","isDown"])),methods:{closeDropDown:function(e){e.target.closest("#dropdown-menu")||e.target.closest("#dropdown-trigger")||this.isDown&&this.$store.dispatch("dropdown/changeIsDown",!1),e.target.closest("#burger-menu")||e.target.closest("#burger-button")||this.isOpen&&this.$store.dispatch("dropdown/changeIsOpen",!1)}}},l=c,u=s("2877"),d=Object(u["a"])(l,i,r,!1,null,null,null),m=d.exports,p=s("8c4f"),v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("GlobalMenu",[s("div",{staticClass:"field has-addons search-container"},[s("div",{staticClass:"control",attrs:{id:"search-input"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],staticClass:"input is-small is-fullwidth",attrs:{type:"text",placeholder:"キーワードで検索"},domProps:{value:e.searchKeyword},on:{input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}})]),s("div",{staticClass:"control",attrs:{id:"search-button"}},[s("a",{staticClass:"button is-info is-small is-fullwidth",on:{click:function(t){return t.preventDefault(),e.clickForSearch(t)}}},[e._v(" 検索 "),s("fa-icon",{staticClass:"search-icon ml-2",attrs:{icon:"search"}})],1)])])]),s("GlobalMessage"),s("div",{staticClass:"container mt-4",attrs:{id:"home-container"}},[e._m(0),e.posts.length?s("div",[s("div",{staticClass:"pb-5"},[s("div",{staticClass:"pb-3",attrs:{id:"category-menu"}},[s("a",{directives:[{name:"show",rawName:"v-show",value:!e.filtering,expression:"!filtering"}],on:{click:e.switchFilter}},[s("fa-icon",{attrs:{icon:"filter"}}),e._v(" フィルタ")],1),s("a",{directives:[{name:"show",rawName:"v-show",value:e.filtering,expression:"filtering"}],on:{click:e.switchFilter}},[s("fa-icon",{attrs:{icon:"times"}}),e._v(" 閉じる")],1)]),s("CategoryFilter",{directives:[{name:"show",rawName:"v-show",value:e.filtering,expression:"filtering"}],staticClass:"p-4",attrs:{id:"tablet-category-filter"},on:{searchForCategory:function(t){return e.setPostsInHome(t)}}})],1),s("div",{staticClass:"columns posts-container is-marginless"},[s("div",{staticClass:"column"},[s("PostsList",{attrs:{posts:e.posts}}),s("Pagination",{staticClass:"mt-6",attrs:{id:""},on:{paginate:function(t){return e.setPostsInHome(t)}}})],1),s("CategoryFilter",{directives:[{name:"show",rawName:"v-show",value:e.filtering,expression:"filtering"}],staticClass:"column is-3 ml-5",attrs:{id:"pc-category-filter"},on:{searchForCategory:function(t){return e.setPostsInHome(t)}}})],1)]):s("div",{staticClass:"mt-6 columns has-text-centered"},[s("h3",{staticClass:"column a6-font-color"},[e._v(e._s(e.noPosts))])])])],1)},f=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns is-marginless"},[s("div",{staticClass:"column content has-text-centered"},[s("h1",{staticClass:"app-title a6-font-color"},[e._v("KESHKII")]),s("p",{staticClass:"mt-2 a6-font-color"},[e._v("景色共有サイト")])])])}],h=(s("d3b7"),s("99af"),s("07ac"),s("bc3a")),g=s.n(h),C=(s("4de4"),{username:"",isLoggedIn:!1,favoritePostsIdList:[],favoriteUsersList:[]}),y={username:function(e){return e.username},isLoggedIn:function(e){return e.isLoggedIn},favoritePostsIdList:function(e){return e.favoritePostsIdList},favoriteUsersList:function(e){return e.favoriteUsersList}},w={set:function(e,t){e.username=t.user.username,e.isLoggedIn=!0,e.favoritePostsIdList=t.user.favorite_posts},clear:function(e){e.username="",e.isLoggedIn=!1,e.favoritePostsIdList=[],e.favoriteUsersList=[]},replaceFavoritePostsIdList:function(e,t){e.favoritePostsIdList=t.favoritePostsIdList},deleteFavoritePost:function(e,t){var s=e.favoritePostsIdList;e.favoritePostsIdList=s.filter((function(e){return e!==t.postId}))},replaceFavoriteUsersList:function(e,t){e.favoriteUsersList=t.favoriteUsersList},addFavoriteUser:function(e,t){e.favoriteUsersList.push(t.data)},deleteFavoriteUser:function(e,t){var s=e.favoriteUsersList;e.favoriteUsersList=s.filter((function(e){return e!==t.data}))}},b={register:function(e,t){return G.post("/auth/users/",{username:t.username,password:t.password,re_password:t.rePassword})},login:function(e,t){var s=e.dispatch;return G.post("/auth/jwt/create/",{username:t.username,password:t.password}).then((function(e){return localStorage.setItem("access",e.data.access),s("reload").then((function(e){return e}))}))},logout:function(e){var t=e.commit;localStorage.removeItem("access"),t("clear")},reload:function(e){var t=e.commit;return G.get("/following/").then((function(e){t("replaceFavoriteUsersList",{favoriteUsersList:e.data})})),G.get("/auth/users/me/").then((function(e){var s=e.data;return t("set",{user:s}),s}))},setFavoritePostsIdList:function(e,t){var s=e.commit;s("replaceFavoritePostsIdList",{favoritePostsIdList:t})},removeFavoritePost:function(e,t){var s=e.commit;s("deleteFavoritePost",{postId:t})},setFavoriteUser:function(e,t){var s=e.commit;s("addFavoriteUser",{data:t})},removeFavoriteUser:function(e,t){var s=e.commit;s("deleteFavoriteUser",{data:t})}},_={strict:!1,namespaced:!0,state:C,getters:y,mutations:w,actions:b},P={error:"",warnings:[],info:"",addition:{type:"",process:""}},x={error:function(e){return e.error},warnings:function(e){return e.warnings},info:function(e){return e.info},addition:function(e){return e.addition}},k={set:function(e,t){t.error&&(e.error=t.error),t.warnings&&(e.warnings=t.warnings),t.info&&(e.info=t.info)},clear:function(e){e.error="",e.warnings=[],e.info=""},setAddition:function(e,t){e.addition.type=t.messageType,e.addition.process=t.process},clearAddition:function(e){e.addition.type="",e.addition.process=""}},L={setErrorMessage:function(e,t){var s=e.commit;s("clear"),s("set",{error:t.message})},setWarningMessages:function(e,t){var s=e.commit;s("clear"),s("set",{warnings:t.messages})},setInfoMessage:function(e,t){var s=e.commit;s("clear"),s("set",{info:t.message})},clearMessages:function(e){var t=e.commit;t("clear")},setAddition:function(e,t){var s=e.commit;s("setAddition",{messageType:t.messageType,process:t.process})},clearAddition:function(e){var t=e.commit;t("clearAddition")}},I={strict:!1,namespaced:!0,state:P,getters:x,mutations:k,actions:L},$={next:"",previous:"",count:0,totalPages:0,currentPage:0,pageSize:0,searchKeyword:"",searchCategorys:[],searchPrefecture:""},F={next:function(e){return e.next},previous:function(e){return e.previous},count:function(e){return e.count},totalPages:function(e){return e.totalPages},currentPage:function(e){return e.currentPage},previousPage:function(e){return e.currentPage-1},nextPage:function(e){return e.currentPage+1},pageSize:function(e){return e.pageSize},hasNext:function(e){return!!e.next},hasPrevious:function(e){return!!e.previous},searchKeyword:function(e){return e.searchKeyword},searchCategorys:function(e){return e.searchCategorys},searchPrefecture:function(e){return e.searchPrefecture}},M={set:function(e,t){e.next=t.next,e.previous=t.previous,e.count=t.count,e.totalPages=t.total_pages,e.currentPage=t.current_page,e.pageSize=t.page_size},setSearchKeyword:function(e,t){e.searchKeyword=t.searchKeyword},setSearchCategorys:function(e,t){e.searchCategorys=t.searchCategorys},setSearchPrefecture:function(e,t){e.searchPrefecture=t.searchPrefecture},clearSearchKeyword:function(e){e.searchKeyword=""},clearSearchCategorys:function(e){e.searchCategorys=[]},clearSearchPrefecture:function(e){e.searchPrefecture=""}},A={setPagination:function(e,t){var s=e.commit;s("set",t)},registerSearchKeyword:function(e,t){var s=e.commit;s("setSearchKeyword",{searchKeyword:t})},registerSearchCategorys:function(e,t){var s=e.commit;s("setSearchCategorys",{searchCategorys:t})},registerSearchPrefecture:function(e,t){var s=e.commit;s("setSearchPrefecture",{searchPrefecture:t})},destroySearchKeyword:function(e){var t=e.commit;t("clearSearchKeyword")},destroySearchCategorys:function(e){var t=e.commit;t("clearSearchCategorys")},destroySearchPrefecture:function(e){var t=e.commit;t("clearSearchPrefecture")}},N={strict:!1,namespaced:!0,state:$,getters:F,mutations:M,actions:A},O={isDown:!1,isOpen:!1},U={isDown:function(e){return e.isDown},isOpen:function(e){return e.isOpen}},E={setIsDown:function(e,t){e.isDown=t},setIsOpen:function(e,t){e.isOpen=t}},S={changeIsDown:function(e,t){var s=e.commit;s("setIsDown",t)},changeIsOpen:function(e,t){var s=e.commit;s("setIsOpen",t)}},j={strict:!1,namespaced:!0,state:O,getters:U,mutations:E,actions:S};a["a"].use(n["a"]);var T=new n["a"].Store({modules:{auth:_,message:I,pagination:N,dropdown:j}}),D=g.a.create({baseURL:"/api/v1/",timeout:1e4,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});D.interceptors.request.use((function(e){T.dispatch("message/clearMessages");var t=localStorage.getItem("access");return t?(e.headers.Authorization="JWT "+t,e):e}),(function(e){return Promise.reject(e)})),D.interceptors.response.use((function(e){return e}),(function(e){T.dispatch("message/setAddition",{messageType:"error",process:"api"});var t,s=e.response?e.response.status:500;if(400===s){T.dispatch("message/setAddition",{messageType:"warning",process:"api"});var a=[].concat.apply([],Object.values(e.response.data));T.dispatch("message/setWarningMessages",{messages:a})}else if(401===s){var i=localStorage.getItem("access");t=null!=i?"ログインしてください。":"入力項目のいずれかが間違っています。",T.dispatch("auth/logout"),T.dispatch("message/setErrorMessage",{message:t})}else 403===s?(t="許可されていません。",T.dispatch("message/setErrorMessage")):(t="問題が発生しました。",T.dispatch("message/setErrorMessage",{message:t}));return Promise.reject(e)}));var W=g.a.create({baseURL:"/api/v1/",timeout:1e4,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});W.interceptors.response.use((function(e){return e}),(function(e){T.dispatch("message/setAddition",{messageType:"error",process:"api"});var t,s=e.response?e.response.status:500;if(400===s){T.dispatch("message/setAddition",{messageType:"warning",process:"api"});var a=[].concat.apply([],Object.values(e.response.data));T.dispatch("message/setWarningMessages",{messages:a})}else 403===s?(t="許可されていません。",T.dispatch("message/setErrorMessage")):(t="問題が発生しました。",T.dispatch("message/setErrorMessage",{message:t}));return Promise.reject(e)}));var G=D,K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{staticClass:"navbar is-primary",attrs:{id:"global-menu"}},[s("ModalWindow",{attrs:{showWindow:e.modalInfo},on:{removeWindow:e.removeModalWindow},scopedSlots:e._u([{key:"appOverview",fn:function(){return[s("AppOverview",{on:{removeModalInAppOverview:e.removeModalWindow}})]},proxy:!0}])}),s("div",{staticClass:"container"},[s("div",{staticClass:"navbar-brand is-marginless"},[s("router-link",{staticClass:"navbar-item",attrs:{id:"app-name",to:"/"}},[s("img",{attrs:{src:e.logo,alt:"keshikii"}})]),s("span",{staticClass:"navbar-item",attrs:{id:"tablet-search"}},[e._t("default")],2),s("a",{staticClass:"navbar-burger",attrs:{id:"burger-button",role:"button","aria-label":"menu","aria-expanded":"false"},on:{click:e.toggleBurger}},[s("span",{attrs:{"aria-hidden":"true"}}),s("span",{attrs:{"aria-hidden":"true"}}),s("span",{attrs:{"aria-hidden":"true"}})])],1),s("span",{staticClass:"navbar-item",attrs:{id:"mobile-search"}},[e._t("default")],2),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],attrs:{id:"burger-menu"}},[s("a",{staticClass:"navbar-item",on:{click:e.showAppOverview}},[e._v("KESHKIIとは")]),s("router-link",{staticClass:"navbar-item",attrs:{to:"/create/post"}},[e._v(" 投稿する ")]),e.isLoggedIn?[s("router-link",{staticClass:"navbar-item",attrs:{to:"/mypage"}},[e._v(" マイページ ")]),s("a",{staticClass:"navbar-item",on:{click:e.logout}},[e._v(" ログアウト ")])]:[s("router-link",{staticClass:"navbar-item",attrs:{to:"/login"}},[e._v(" ログイン ")]),s("router-link",{staticClass:"navbar-item",attrs:{to:"/signup"}},[e._v(" 新規登録 ")])]],2),s("div",{staticClass:"navbar-menu is-marginless"},[s("div",{staticClass:"navbar-end"},[s("span",{staticClass:"navbar-item"},[e._t("default")],2),s("a",{staticClass:"navbar-item",on:{click:e.showAppOverview}},[e._v("KESHKIIとは")]),s("router-link",{staticClass:"navbar-item",attrs:{to:"/create/post"}},[e._v("投稿する")]),e.isLoggedIn?[s("div",{staticClass:"dropdown navbar-item is-paddingless pc-button-width",attrs:{id:"dropdown-container"}},[s("div",{staticClass:"dropdown-trigger full",attrs:{id:"dropdown-trigger"}},[s("button",{staticClass:"button is-primary",attrs:{"aria-haspopup":"true"},on:{click:e.toggleDropdown}},[e._v(" "+e._s(e.username)+" ")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isDown,expression:"isDown"}],attrs:{id:"dropdown-menu",role:"menu"}},[s("div",{staticClass:"dropdown-content",on:{mouseover:e.addIsActiveClass,mouseout:e.deleteIsActiveClass}},[s("router-link",{staticClass:"dropdown-item",attrs:{to:"/mypage"}},[e._v("マイページ")]),s("hr",{staticClass:"dropdown-divider"}),s("a",{staticClass:"dropdown-item",on:{click:e.logout}},[e._v(" ログアウト ")])],1)])])]:[s("router-link",{staticClass:"navbar-item",attrs:{to:"/signup"}},[e._v("新規登録")]),s("router-link",{staticClass:"navbar-item",attrs:{to:"/login"}},[e._v("ログイン")])]],2)])])],1)},z=[],R=(s("ac1f"),s("5319"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app-overview"}},[s("div",{staticClass:"scroll-block"},[s("div",{staticClass:"overview-container"},[s("h1",{staticClass:"app-title pt-5 pb-3"},[e._v("KESHKIIとは")]),e._m(0),e._m(1),e._m(2),e._m(3),s("a",{staticClass:"button is-primary is-medium is-outlined mt-5 mb-5 border-radius",on:{click:e.remove}},[e._v("閉じる")])])])])}),V=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("span",[e._v("誰でも気軽に")]),s("span",[e._v("写真を投稿できる")]),s("span",[e._v("景色共有アプリです。")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("span",[e._v("あなたが")]),s("span",[e._v("日常で見つけた")]),s("span",[e._v("小さな発見を")]),s("span",[e._v("写真に収めて")]),s("span",[e._v("他の人に")]),s("span",[e._v("紹介しましょう。")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("span",[e._v("このアプリでは")]),s("span",[e._v("地名や住所を")]),s("span",[e._v("表記できるため")]),s("span",[e._v("写真の撮影場所を")]),s("span",[e._v("サイト閲覧者に")]),s("span",[e._v("教えることが")]),s("span",[e._v("できます。")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("span",[e._v("あなたの見つけた")]),s("span",[e._v("観光地を他の人に")]),s("span",[e._v("紹介してみませんか？")])])}],q={methods:{remove:function(){this.$emit("removeModalInAppOverview")}}},B=q,H=(s("0378"),Object(u["a"])(B,R,V,!1,null,"316c4b14",null)),Y=H.exports,Z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{displayNone:e.showWindow.hideWindow},on:{click:e.removeModalWindow}},[s("div",{staticClass:"columns is-centered is-vcentered is-mobile",attrs:{id:"modal-overlay"}},[s("div",{staticClass:"column is-4-desktop is-6-tablet is-10-mobile is-paddingless no-func",attrs:{id:"modal-content"}},["favoriteUsers"===e.showWindow.slotName?e._t("favoriteUsers"):e._e(),"followers"===e.showWindow.slotName?e._t("followers"):e._e(),"appOverview"===e.showWindow.slotName?e._t("appOverview"):e._e()],2)])])},X=[],J={props:["showWindow"],methods:{removeModalWindow:function(e){e.target.closest(".no-func")||this.$emit("removeWindow")}}},Q=J,ee=(s("9a67"),Object(u["a"])(Q,Z,X,!1,null,"07e2d11d",null)),te=ee.exports,se={components:{ModalWindow:te,AppOverview:Y},data:function(){return{logo:s("dcea"),modalInfo:{hideWindow:!0,slotName:""}}},computed:Object(o["a"])(Object(o["a"])({},Object(n["b"])("auth",["username","isLoggedIn"])),Object(n["b"])("dropdown",["isDown","isOpen"])),methods:{logout:function(){this.$store.dispatch("auth/logout"),"/"!==this.$route.path?this.$router.replace({name:"home",params:{before:"logout"}}):(this.isOpen=!1,this.$store.dispatch("message/setAddition",{messageType:"info",process:"afterLogoutInHome"}))},toggleDropdown:function(){this.isDown?this.$store.dispatch("dropdown/changeIsDown",!1):this.$store.dispatch("dropdown/changeIsDown",!0)},toggleBurger:function(){this.isOpen?this.$store.dispatch("dropdown/changeIsOpen",!1):this.$store.dispatch("dropdown/changeIsOpen",!0)},addIsActiveClass:function(e){e.target.classList.add("is-active")},deleteIsActiveClass:function(e){e.target.classList.remove("is-active")},removeModalWindow:function(){this.modalInfo.slotName="",this.modalInfo.hideWindow=!0},showAppOverview:function(){this.modalInfo.slotName="appOverview",this.modalInfo.hideWindow=!1}},destroyed:function(){this.isOpen&&this.$store.dispatch("dropdown/changeIsOpen",!1),this.isDown&&this.$store.dispatch("dropdown/changeIsDown",!1)}},ae=se,ie=(s("f556"),Object(u["a"])(ae,K,z,!1,null,"04d6bf26",null)),re=ie.exports,oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"message-container"}},[s("div",{staticClass:"container",attrs:{id:"messages"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.messages.errorMessage,expression:"messages.errorMessage"}],staticClass:"columns notification is-danger is-light is-marginless is-paddingless opacity",attrs:{id:"error"}},[s("p",{staticClass:"column is-11 pl-5"},[e._v(e._s(e.messages.errorMessage))]),s("button",{staticClass:"delete column",on:{click:e.deleteMessageData}})]),e.messages.warningMessages.length?s("div",{staticClass:"div-space"}):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.messages.warningMessages.length,expression:"messages.warningMessages.length"}],staticClass:"columns notification is-warning is-light is-marginless is-paddingless opacity",attrs:{id:"warning"}},[s("div",{staticClass:"column is-11 pl-5"},e._l(e.messages.warningMessages,(function(t){return s("p",{key:t},[e._v(" "+e._s(t)+" ")])})),0),s("button",{staticClass:"delete column",on:{click:e.deleteMessageData}})]),e.messages.infoMessage?s("div",{staticClass:"div-space"}):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.messages.infoMessage,expression:"messages.infoMessage"}],staticClass:"columns notification is-primary is-light is-marginless is-paddingless opacity",attrs:{id:"info"}},[s("p",{staticClass:"column is-11 pl-5"},[e._v(e._s(e.messages.infoMessage))]),s("button",{staticClass:"delete column",on:{click:e.deleteMessageData}})])])])},ne=[],ce={computed:Object(o["a"])(Object(o["a"])({},Object(n["b"])("message",["error","warnings","info"])),{},{additionType:function(){return this.$store.getters["message/addition"].type},additionProcess:function(){return this.$store.getters["message/addition"].process}}),data:function(){return{messages:{errorMessage:"",warningMessages:[],infoMessage:""}}},methods:{deleteMessageData:function(e){var t=e.target.parentElement.id;"error"===t?this.messages.errorMessage="":"warning"===t?this.messages.warningMessages=[]:this.messages.infoMessage=""}},mounted:function(){this.messages.errorMessage=this.error,this.messages.warningMessages=this.warnings,this.messages.infoMessage=this.info,this.$store.dispatch("message/clearMessages")},watch:{additionProcess:function(e){"api"===e?"error"===this.additionType?this.messages.errorMessage=this.error:"warning"===this.additionType?this.messages.warningMessages=this.warnings:"info"===this.additionType&&(this.messages.infoMessage=this.info):"afterLogoutInHome"===e&&"info"===this.additionType||"afterLogout"===e&&"info"===this.additionType?this.messages.infoMessage="ログアウトしました。":"created"===e&&"info"===this.additionType?this.messages.infoMessage="投稿しました。":"clickAddFavorites"===e?this.messages.errorMessage="ログインしてください。":"login"===e&&"info"===this.additionType&&(this.messages.infoMessage="ログインしました。"),""===e&&""===this.additionType||this.$store.dispatch("message/clearAddition"),this.$store.dispatch("message/clearMessages")}}},le=ce,ue=(s("df26"),Object(u["a"])(le,oe,ne,!1,null,"199067b7",null)),de=ue.exports,me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("nav",{staticClass:"pagination is-centered tablet-none",attrs:{role:"navigation"}},[s("ul",{staticClass:"pagination-list"},[s("nav",{staticClass:"pagination",attrs:{role:"navigation","aria-label":"pagination"}},[s("ul",{staticClass:"pagination-list"},[s("li",[s("a",{directives:[{name:"show",rawName:"v-show",value:e.hasPrevious,expression:"hasPrevious"}],staticClass:"pagination-previous",on:{click:function(t){return e.movePage(e.currentPage-1)}}},[e._v("前のページ")]),s("a",{directives:[{name:"show",rawName:"v-show",value:!e.hasPrevious,expression:"!hasPrevious"}],staticClass:"pagination-previous",attrs:{disabled:!e.hasPrevious}},[e._v("前のページ")])]),e.totalPages<=10?e._l(e.totalPages,(function(t){return s("li",{key:t},[s("a",{staticClass:"pagination-link",attrs:{id:t},on:{click:function(s){return e.movePage(t)}}},[e._v(e._s(t))])])})):[e.currentPage<=10?e._l(10,(function(t){return s("li",{key:t},[s("a",{staticClass:"pagination-link",attrs:{id:t},on:{click:function(s){return e.movePage(t)}}},[e._v(" "+e._s(t)+" ")])])})):[e.tensOfCurrentPage===e.totalPagesDivideTen?[0===e.firstPlaceOfCurrentPage?e._l(10,(function(t){return s("li",{key:t},[s("a",{staticClass:"pagination-link",attrs:{id:10*(e.tensOfCurrentPage-1)+t},on:{click:function(s){e.movePage(10*(e.tensOfCurrentPage-1)+t)}}},[e._v(" "+e._s(10*(e.tensOfCurrentPage-1)+t)+" ")])])})):e._l(e.divisionRemainder,(function(t){return s("li",{key:t},[s("a",{staticClass:"pagination-link",attrs:{id:10*e.tensOfCurrentPage+t},on:{click:function(s){return e.movePage(10*e.tensOfCurrentPage+t)}}},[e._v(" "+e._s(10*e.tensOfCurrentPage+t)+" ")])])}))]:e._l(10,(function(t){return s("li",{key:t},[s("a",{staticClass:"pagination-link",attrs:{id:10*e.tensOfCurrentPage+t},on:{click:function(s){return e.movePage(10*e.tensOfCurrentPage+t)}}},[e._v(" "+e._s(10*e.tensOfCurrentPage+t)+" ")])])}))]],s("li",[s("a",{directives:[{name:"show",rawName:"v-show",value:e.hasNext,expression:"hasNext"}],staticClass:"pagination-next",on:{click:function(t){return e.movePage(e.currentPage+1)}}},[e._v("次のページ")]),s("a",{directives:[{name:"show",rawName:"v-show",value:!e.hasNext,expression:"!hasNext"}],staticClass:"pagination-next",attrs:{disabled:!e.hasNext}},[e._v("次のページ")])])],2)])])]),s("div",{staticClass:"text-align-center desktop-none"},[s("div",[s("a",{staticClass:"pagination-link is-current"},[e._v(e._s(e.currentPage))])]),s("a",{directives:[{name:"show",rawName:"v-show",value:e.hasPrevious,expression:"hasPrevious"}],staticClass:"pagination-previous",on:{click:function(t){return e.movePage(e.currentPage-1)}}},[e._v(" 前のページ ")]),s("a",{directives:[{name:"show",rawName:"v-show",value:!e.hasPrevious,expression:"!hasPrevious"}],staticClass:"pagination-previous",attrs:{disabled:!e.hasPrevious}},[e._v(" 前のページ ")]),s("a",{directives:[{name:"show",rawName:"v-show",value:e.hasNext,expression:"hasNext"}],staticClass:"pagination-next",on:{click:function(t){return e.movePage(e.currentPage+1)}}},[e._v(" 次のページ ")]),s("a",{directives:[{name:"show",rawName:"v-show",value:!e.hasNext,expression:"!hasNext"}],staticClass:"pagination-next",attrs:{disabled:!e.hasNext}},[e._v(" 次のページ ")])])])},pe=[],ve=s("b85c"),fe=(s("b0c0"),{props:["id"],mounted:function(){document.getElementById(1).classList.add("is-current")},computed:Object(o["a"])(Object(o["a"])({},Object(n["b"])("pagination",["count","totalPages","currentPage","previousPage","nextPage","hasPrevious","hasNext","searchKeyword","searchCategorys","searchPrefecture"])),{},{totalPagesDivideTen:function(){return Math.floor(this.totalPages/10)},divisionRemainder:function(){return this.totalPages%10},tensOfCurrentPage:function(){return Math.floor(this.currentPage/10)},firstPlaceOfCurrentPage:function(){return this.currentPage-10*this.tensOfCurrentPage}}),methods:{movePage:function(e){var t=this,s="",a={};"myPosts"===this.$route.name?(s="/users_post/",a=G):"favoritePosts"===this.$route.name?(s="/favorite_posts/",a=G):(s="/posts/",a=W);var i=s;if(this.searchKeyword){var r="?keyword="+this.searchKeyword+"&page="+e;i+=r}else if(this.searchCategorys.length){var o,n="",c=this.searchCategorys[0],l=Object(ve["a"])(this.searchCategorys);try{for(l.s();!(o=l.n()).done;){var u=o.value;n+=u===c?"?categorys="+u:"&categorys="+u}}catch(d){l.e(d)}finally{l.f()}i+=n+"&page="+e}else i+="?page="+e;this.searchPrefecture&&(i+="&prefecture="+this.searchPrefecture),"viewUser"===this.$route.name&&(i+="&user_id="+this.id),a.get(i).then((function(s){t.$emit("paginate",s.data.results),t.$store.dispatch("pagination/setPagination",s.data).then((function(){document.getElementById(e).classList.add("is-current")}))}))}},watch:{currentPage:function(e,t){t&&document.getElementById(t).classList.remove("is-current")}}}),he=fe,ge=(s("602c"),Object(u["a"])(he,me,pe,!1,null,"7e1c5810",null)),Ce=ge.exports,ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("aside",{staticClass:"menu panel container",attrs:{id:"filter-container"}},[s("div",{staticClass:"container"},[s("label",{staticClass:"label pb-3",attrs:{id:"filter-label"}},[s("fa-icon",{attrs:{icon:"filter"}}),e._v(" フィルタ ")],1),s("div",{staticClass:"columns is-marginless",attrs:{id:"pc-search-button"}},[s("button",{staticClass:"button is-primary column is-fullwidth",on:{click:e.clickSearchButton}},[e._v(" 検索 ")])]),s("div",{staticClass:"mb-5 mt-4"},[s("p",{staticClass:"menu-label"},[e._v("都道府県")]),s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedPrefecture,expression:"selectedPrefecture"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedPrefecture=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[e._v("指定なし")]),s("option",[e._v("北海道")]),s("option",[e._v("青森県")]),s("option",[e._v("岩手県")]),s("option",[e._v("宮城県")]),s("option",[e._v("秋田県")]),s("option",[e._v("山形県")]),s("option",[e._v("福島県")]),s("option",[e._v("茨城県")]),s("option",[e._v("栃木県")]),s("option",[e._v("群馬県")]),s("option",[e._v("埼玉県")]),s("option",[e._v("千葉県")]),s("option",[e._v("東京都")]),s("option",[e._v("神奈川県")]),s("option",[e._v("新潟県")]),s("option",[e._v("富山県")]),s("option",[e._v("石川県")]),s("option",[e._v("福井県")]),s("option",[e._v("山梨県")]),s("option",[e._v("長野県")]),s("option",[e._v("岐阜県")]),s("option",[e._v("静岡県")]),s("option",[e._v("愛知県")]),s("option",[e._v("三重県")]),s("option",[e._v("滋賀県")]),s("option",[e._v("京都府")]),s("option",[e._v("大阪府")]),s("option",[e._v("兵庫県")]),s("option",[e._v("奈良県")]),s("option",[e._v("和歌山県")]),s("option",[e._v("鳥取県")]),s("option",[e._v("島根県")]),s("option",[e._v("岡山県")]),s("option",[e._v("広島県")]),s("option",[e._v("山口県")]),s("option",[e._v("徳島県")]),s("option",[e._v("香川県")]),s("option",[e._v("愛媛県")]),s("option",[e._v("高知県")]),s("option",[e._v("福岡県")]),s("option",[e._v("佐賀県")]),s("option",[e._v("長崎県")]),s("option",[e._v("熊本県")]),s("option",[e._v("大分県")]),s("option",[e._v("宮崎県")]),s("option",[e._v("鹿児島県")]),s("option",[e._v("沖縄県")])])])]),s("div",[s("p",{staticClass:"menu-label"},[e._v("カテゴリー")]),s("div",{staticClass:"select is-info mb-2"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.currentParentCategory,expression:"currentParentCategory"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.currentParentCategory=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[e._v("カテゴリを選択")]),s("option",[e._v("建物・人工物")]),s("option",[e._v("自然")])])]),s("div",[s("p",{directives:[{name:"show",rawName:"v-show",value:e.currentParentCategory,expression:"currentParentCategory"}],staticClass:"help mb-1"},[e._v(" 以下からカテゴリーを選択してください。 ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:"建物・人工物"===e.currentParentCategory,expression:"currentParentCategory === '建物・人工物'"}],staticClass:"category-checkbox"},[s("label",{staticClass:"checkbox mr-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategoryList,expression:"selectedCategoryList"}],attrs:{value:"道路",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategoryList)?e._i(e.selectedCategoryList,"道路")>-1:e.selectedCategoryList},on:{change:function(t){var s=e.selectedCategoryList,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="道路",o=e._i(s,r);a.checked?o<0&&(e.selectedCategoryList=s.concat([r])):o>-1&&(e.selectedCategoryList=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategoryList=i}}}),e._v(" 道路 ")]),s("label",{staticClass:"checkbox mr-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategoryList,expression:"selectedCategoryList"}],attrs:{value:"商業施設",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategoryList)?e._i(e.selectedCategoryList,"商業施設")>-1:e.selectedCategoryList},on:{change:function(t){var s=e.selectedCategoryList,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="商業施設",o=e._i(s,r);a.checked?o<0&&(e.selectedCategoryList=s.concat([r])):o>-1&&(e.selectedCategoryList=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategoryList=i}}}),e._v(" 商業施設 ")]),s("label",{staticClass:"checkbox mr-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategoryList,expression:"selectedCategoryList"}],attrs:{value:"ビル",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategoryList)?e._i(e.selectedCategoryList,"ビル")>-1:e.selectedCategoryList},on:{change:function(t){var s=e.selectedCategoryList,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="ビル",o=e._i(s,r);a.checked?o<0&&(e.selectedCategoryList=s.concat([r])):o>-1&&(e.selectedCategoryList=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategoryList=i}}}),e._v(" ビル ")]),s("label",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategoryList,expression:"selectedCategoryList"}],attrs:{value:"寺・神社",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategoryList)?e._i(e.selectedCategoryList,"寺・神社")>-1:e.selectedCategoryList},on:{change:function(t){var s=e.selectedCategoryList,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="寺・神社",o=e._i(s,r);a.checked?o<0&&(e.selectedCategoryList=s.concat([r])):o>-1&&(e.selectedCategoryList=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategoryList=i}}}),e._v(" 寺・神社 ")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:"自然"===e.currentParentCategory,expression:"currentParentCategory === '自然'"}],staticClass:"category-checkbox"},[s("label",{staticClass:"checkbox mr-5"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategoryList,expression:"selectedCategoryList"}],attrs:{value:"山",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategoryList)?e._i(e.selectedCategoryList,"山")>-1:e.selectedCategoryList},on:{change:function(t){var s=e.selectedCategoryList,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="山",o=e._i(s,r);a.checked?o<0&&(e.selectedCategoryList=s.concat([r])):o>-1&&(e.selectedCategoryList=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategoryList=i}}}),e._v(" 山 ")]),s("label",{staticClass:"checkbox mr-5"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategoryList,expression:"selectedCategoryList"}],attrs:{value:"海",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategoryList)?e._i(e.selectedCategoryList,"海")>-1:e.selectedCategoryList},on:{change:function(t){var s=e.selectedCategoryList,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="海",o=e._i(s,r);a.checked?o<0&&(e.selectedCategoryList=s.concat([r])):o>-1&&(e.selectedCategoryList=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategoryList=i}}}),e._v(" 海 ")]),s("label",{staticClass:"checkbox mr-5"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategoryList,expression:"selectedCategoryList"}],attrs:{value:"空",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategoryList)?e._i(e.selectedCategoryList,"空")>-1:e.selectedCategoryList},on:{change:function(t){var s=e.selectedCategoryList,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="空",o=e._i(s,r);a.checked?o<0&&(e.selectedCategoryList=s.concat([r])):o>-1&&(e.selectedCategoryList=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategoryList=i}}}),e._v(" 空 ")]),s("label",{staticClass:"checkbox mr-5"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategoryList,expression:"selectedCategoryList"}],attrs:{value:"湖",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategoryList)?e._i(e.selectedCategoryList,"湖")>-1:e.selectedCategoryList},on:{change:function(t){var s=e.selectedCategoryList,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="湖",o=e._i(s,r);a.checked?o<0&&(e.selectedCategoryList=s.concat([r])):o>-1&&(e.selectedCategoryList=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategoryList=i}}}),e._v(" 湖 ")]),s("label",{staticClass:"checkbox mr-5"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategoryList,expression:"selectedCategoryList"}],attrs:{value:"星",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategoryList)?e._i(e.selectedCategoryList,"星")>-1:e.selectedCategoryList},on:{change:function(t){var s=e.selectedCategoryList,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="星",o=e._i(s,r);a.checked?o<0&&(e.selectedCategoryList=s.concat([r])):o>-1&&(e.selectedCategoryList=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategoryList=i}}}),e._v(" 星 ")]),s("label",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategoryList,expression:"selectedCategoryList"}],attrs:{value:"森林",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategoryList)?e._i(e.selectedCategoryList,"森林")>-1:e.selectedCategoryList},on:{change:function(t){var s=e.selectedCategoryList,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="森林",o=e._i(s,r);a.checked?o<0&&(e.selectedCategoryList=s.concat([r])):o>-1&&(e.selectedCategoryList=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategoryList=i}}}),e._v(" 森林 ")])])])]),s("div",{staticClass:"mt-3 mb-4"},[s("p",{staticClass:"help"},[e._v("選択したカテゴリー")]),e._l(e.selectedCategoryList,(function(t){return s("span",{key:t,staticClass:"tag is-primary mt-1 mx-1"},[e._v(" "+e._s(t)+" ")])}))],2),s("div",{staticClass:"columns is-marginless",attrs:{id:"tablet-search-button"}},[s("button",{staticClass:"button is-primary column is-fullwidth",on:{click:e.clickSearchButton}},[e._v(" 検索 ")])])])])},we=[],be={data:function(){return{currentParentCategory:"",parentCategoryList:["","artificial-object","nature"],selectedCategoryList:[],selectedPrefecture:""}},methods:{clickParentCategory:function(e){var t=this.parentCategoryList[e];this.currentParentCategory===t?this.currentParentCategory="":this.currentParentCategory=t},clickSearchButton:function(){var e,t=this,s="",a=this.selectedCategoryList[0],i=Object(ve["a"])(this.selectedCategoryList);try{for(i.s();!(e=i.n()).done;){var r=e.value;s+=r===a?"?categorys="+r:"&categorys="+r}}catch(o){i.e(o)}finally{i.f()}this.selectedPrefecture&&(s+=s?"&prefecture="+this.selectedPrefecture:"?prefecture="+this.selectedPrefecture),W.get("/posts/"+s).then((function(e){t.$emit("searchForCategory",e.data.results),t.$store.dispatch("pagination/setPagination",e.data),t.$store.dispatch("pagination/registerSearchCategorys",t.selectedCategoryList),t.$store.dispatch("pagination/registerSearchPrefecture",t.selectedPrefecture)}))}},destroyed:function(){this.$store.dispatch("pagination/destroySearchCategorys"),this.$store.dispatch("pagination/destroySearchPrefecture")}},_e=be,Pe=(s("01b1"),Object(u["a"])(_e,ye,we,!1,null,"6f155601",null)),xe=Pe.exports,ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row columns is-multiline is-marginless"},e._l(e.posts,(function(t){return s("div",{key:t.id,staticClass:"column is-4 click-cursor",on:{click:function(s){return e.viewPost(t.id)}}},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-image"},[s("div",{staticClass:"image-box"},[s("img",{attrs:{src:t.picture_url,alt:t.title}})])]),s("div",{staticClass:"card-content"},[s("div",{staticClass:"post-box"},[s("div",{staticClass:"icon-box"},[s("img",{attrs:{src:t.author.icon_url,alt:"icon"}})]),s("div",[s("p",{staticClass:"title is-4 no-padding"},[e._v(e._s(t.title))]),s("p",{staticClass:"subtitle is-6"},[e._v(e._s(t.author.username)+"の投稿")])])])])])])})),0)},Le=[],Ie={props:["posts"],methods:{viewPost:function(e){this.$router.push({name:"viewPost",params:{id:e}})}}},$e=Ie,Fe=(s("12da"),Object(u["a"])($e,ke,Le,!1,null,"57d69e5a",null)),Me=Fe.exports,Ae={components:{GlobalMenu:re,GlobalMessage:de,Pagination:Ce,CategoryFilter:xe,PostsList:Me},props:["before"],data:function(){return{posts:[],searchKeyword:"",filtering:!1,noPosts:""}},mounted:function(){var e=this;W.get("/posts/").then((function(t){t.data.results.length?(e.posts=t.data.results,e.$store.dispatch("pagination/setPagination",t.data)):e.noPosts="投稿はありません。"}))},methods:{viewPost:function(e){this.$router.push({name:"viewPost",params:{id:e}})},setPostsInHome:function(e){this.posts=[],e.length?this.posts=e:this.noPosts="投稿が見つかりませんでした。"},clickForSearch:function(){var e=this;W.get("/posts/?keyword="+this.searchKeyword).then((function(t){e.posts=t.data.results,e.posts.length?(e.$store.dispatch("pagination/setPagination",t.data),e.$store.dispatch("pagination/registerSearchKeyword",e.searchKeyword)):e.noPosts="投稿が見つかりませんでした。"}))},switchFilter:function(){this.filtering=!this.filtering}},beforeRouteEnter:function(e,t,s){"create"===e.params.before?s((function(e){e.$store.dispatch("message/setAddition",{messageType:"info",process:"created"})})):"logout"===e.params.before?s((function(e){e.$store.dispatch("message/setAddition",{messageType:"info",process:"afterLogout"})})):"login"===e.params.before?s((function(e){e.$store.dispatch("message/setAddition",{messageType:"info",process:"login"})})):s()},destroyed:function(){this.$store.dispatch("pagination/destroySearchKeyword")}},Ne=Ae,Oe=(s("09a1"),Object(u["a"])(Ne,v,f,!1,null,"08dafc38",null)),Ue=Oe.exports,Ee=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("GlobalMenu"),s("GlobalMessage"),s("div",{staticClass:"container mt-6",attrs:{id:"signup-container"}},[s("div",{staticClass:"columns is-centered"},[s("form",{staticClass:"box column is-4-desktop is-6-tablet is-8-mobile",attrs:{id:"signup-form"},on:{submit:function(t){return t.preventDefault(),e.registerUser(t)}}},[s("div",{attrs:{id:"form-container"}},[e._m(0),s("div",{staticClass:"field pt-4"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.username,expression:"newUser.username"}],staticClass:"input",attrs:{type:"text",placeholder:"ユーザー名"},domProps:{value:e.newUser.username},on:{input:function(t){t.target.composing||e.$set(e.newUser,"username",t.target.value)}}})])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],staticClass:"input",attrs:{type:"password",placeholder:"パスワード"},domProps:{value:e.newUser.password},on:{input:function(t){t.target.composing||e.$set(e.newUser,"password",t.target.value)}}})])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.confirmationPassword,expression:"newUser.confirmationPassword"}],staticClass:"input",attrs:{type:"password",placeholder:"確認用パスワード"},domProps:{value:e.newUser.confirmationPassword},on:{input:function(t){t.target.composing||e.$set(e.newUser,"confirmationPassword",t.target.value)}}})])]),s("button",{staticClass:"button is-primary is-fullwidth",attrs:{id:"tablet-button"}},[e._v(" 新規登録 ")]),s("button",{staticClass:"button is-primary",attrs:{id:"pc-button"}},[e._v("新規登録")])])])])])],1)},Se=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content mt-6 pb-1"},[s("h1",{staticClass:"has-text-centered"},[e._v("SignUp")])])}],je={components:{GlobalMenu:re,GlobalMessage:de},data:function(){return{newUser:{username:"",password:"",confirmationPassword:""}}},methods:{registerUser:function(){var e=this;this.$store.dispatch("auth/register",{username:this.newUser.username,password:this.newUser.password,re_password:this.newUser.confirmationPassword}).then((function(){e.$store.dispatch("auth/login",{username:e.newUser.username,password:e.newUser.password}).then((function(){e.$store.dispatch("message/setInfoMessage",{message:"ユーザー登録が完了しました。"}),e.$router.replace("/")}))}))}}},Te=je,De=(s("29b6"),Object(u["a"])(Te,Ee,Se,!1,null,"ecfad5d4",null)),We=De.exports,Ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("GlobalMenu"),s("GlobalMessage"),s("div",{staticClass:"container mt-6",attrs:{id:"login-container"}},[s("div",{staticClass:"columns is-centered"},[s("form",{staticClass:"box column is-4-desktop is-6-tablet is-8-mobile",attrs:{id:"login-form"},on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[s("div",{attrs:{id:"form-container"}},[e._m(0),s("div",{staticClass:"mt-6"},[s("div",{staticClass:"field pt-5 pb-1"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.username,expression:"form.username"}],staticClass:"input",attrs:{type:"text",placeholder:"ユーザー名"},domProps:{value:e.form.username},on:{input:function(t){t.target.composing||e.$set(e.form,"username",t.target.value)}}})])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],staticClass:"input",attrs:{type:"password",placeholder:"パスワード"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}})])])]),s("button",{staticClass:"button is-primary is-fullwidth",attrs:{id:"tablet-button"}},[e._v(" ログイン ")]),s("button",{staticClass:"button is-primary",attrs:{id:"pc-button"}},[e._v("ログイン")])])])])])],1)},Ke=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content mt-6"},[s("h1",{staticClass:"has-text-centered"},[e._v("Login")])])}],ze={components:{GlobalMenu:re,GlobalMessage:de},data:function(){return{form:{username:"",password:""}}},props:["before"],methods:{login:function(){var e=this;this.$store.dispatch("auth/login",{username:this.form.username,password:this.form.password}).then((function(){var t="";t=e.$route.query.next?e.$route.query.next:{name:"home",params:{before:"login"}},e.$router.replace(t)}))}},beforeRouteEnter:function(e,t,s){"viewPost"===e.params.before?s((function(e){e.$store.dispatch("message/setAddition",{messageType:"error",process:"clickAddFavorites"})})):s()}},Re=ze,Ve=(s("8b6a"),Object(u["a"])(Re,Ge,Ke,!1,null,"4d5a42b6",null)),qe=Ve.exports,Be=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("ModalWindow",{attrs:{showWindow:e.modalInfo},on:{removeWindow:e.removeModalWindowInMyPage},scopedSlots:e._u([{key:"favoriteUsers",fn:function(){return[s("ViewFavoriteUsers",{attrs:{username:e.user.username,favoriteUsers:[]},on:{removeModalInViewFavoriteUsers:e.removeModalWindowInMyPage}})]},proxy:!0},{key:"followers",fn:function(){return[s("ViewFollowers",{attrs:{followers:e.followers,username:e.user.username},on:{removeModalInViewFollowers:e.removeModalWindowInMyPage}})]},proxy:!0}])}),s("GlobalMenu"),s("GlobalMessage"),s("div",{staticClass:"container",attrs:{id:"mypage-container"}},[s("UserProfileArea",{attrs:{user:e.user}})],1),s("TabMenu",{attrs:{routesList:e.routeName,tabNameList:e.tabName,option:!1}}),s("div",{staticClass:"container"},[s("keep-alive",[s("MyProfile",{directives:[{name:"show",rawName:"v-show",value:e.isMyPageRoute,expression:"isMyPageRoute"}],attrs:{user:e.user},on:{showFollowers:function(t){return e.showFollowersInMyPage(t)},showFavoriteUsers:e.showFavoriteUsersInMyPage,moveTabInMyPage:function(t){return e.goToAnotherTab(t)}}})],1),s("keep-alive",[s("router-view")],1)],1)],1)},He=[],Ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("section",{staticClass:"info-tiles mb-5"},[s("div",{staticClass:"tile is-ancestor has-text-centered"},[s("div",{staticClass:"tile is-parent"},[s("article",{staticClass:"tile is-child box click-cursor",on:{click:function(t){return e.moveTab(1)}}},[s("p",{staticClass:"title"},[e._v(e._s(e.myPostsCount))]),s("p",{staticClass:"subtitle"},[e._v("投稿数")])])]),s("div",{staticClass:"tile is-parent"},[s("article",{staticClass:"tile is-child box click-cursor",on:{click:e.showMyFollowers}},[s("p",{staticClass:"title"},[e._v(e._s(e.numberOfFollowers))]),s("p",{staticClass:"subtitle"},[e._v("フォロワ―")])])]),s("div",{staticClass:"tile is-parent"},[s("article",{staticClass:"tile is-child box click-cursor",on:{click:function(t){return e.moveTab(2)}}},[s("p",{staticClass:"title"},[e._v(e._s(e.numberOfFavoritePosts))]),s("p",{staticClass:"subtitle"},[e._v("お気に入り")])])]),s("div",{staticClass:"tile is-parent"},[s("article",{staticClass:"tile is-child box click-cursor",on:{click:e.showMyFavoriteUsers}},[s("p",{staticClass:"title"},[e._v(e._s(e.favoriteUsersList.length))]),s("p",{staticClass:"subtitle"},[e._v("フォロー")])])])])]),s("UserOverview",{attrs:{user:e.user}})],1)},Ze=[],Xe=(s("159b"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns mt-6 is-marginless"},[s("div",{staticClass:"column is-8 content"},[s("p",{staticClass:"mb-5 title-p"},[e._v("自己紹介")]),s("div",[e.user.self_introduction?s("p",[e._v(" "+e._s(e.user.self_introduction)+" ")]):s("p",[e._v("自己紹介は未記入です。")])])]),s("div",{staticClass:"column content"},[s("p",{staticClass:"mb-5 title-p"},[e._v("アカウント作成日時")]),s("div",[s("p",[e._v(e._s(e.user.registered_date))])])])])}),Je=[],Qe={props:["user"]},et=Qe,tt=(s("d5cc"),Object(u["a"])(et,Xe,Je,!1,null,"61ca88f7",null)),st=tt.exports,at={props:["user"],components:{UserOverview:st},data:function(){return{numberOfFollowers:0,myPostsCount:0,myFollowers:[]}},mounted:function(){var e=this;G.get("/users_post/").then((function(t){e.myPostsCount=t.data.count})),G.get("/following/?followers=True").then((function(t){t.data.forEach((function(s){e.myFollowers.push(s.followed_by),e.numberOfFollowers=t.data.length}))}))},computed:Object(o["a"])(Object(o["a"])({},Object(n["b"])("auth",["favoriteUsersList"])),{},{numberOfFavoritePosts:function(){return this.user.favorite_posts?this.user.favorite_posts.length:0}}),methods:{showMyFollowers:function(){this.$emit("showFollowers",this.myFollowers)},showMyFavoriteUsers:function(){this.$emit("showFavoriteUsers")},moveTab:function(e){this.$emit("moveTabInMyPage",e)}}},it=at,rt=(s("e931"),Object(u["a"])(it,Ye,Ze,!1,null,"487e5950",null)),ot=rt.exports,nt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"panel"},[s("p",{staticClass:"panel-heading"},[e._v("フォロー中")]),s("div",{staticClass:"scroll-block"},e._l(e.favoriteUsersList,(function(t){return s("a",{key:t.id,staticClass:"panel-block columns is-marginless",on:{click:function(s){return e.goToUsersPage(t.user_extra_field.username)}}},[s("div",{staticClass:"column is-3-desktop is-4-tablet is-5-mobile"},[s("div",{staticClass:"icon-box"},[s("img",{attrs:{src:t.user_extra_field.icon_url,alt:"icon"}})])]),s("div",{staticClass:"column username hidden"},[s("h3",[e._v(e._s(t.user_extra_field.username))])])])})),0)])},ct=[],lt={computed:{favoriteUsersList:function(){return"mypage"===this.$route.name?this.$store.getters["auth/favoriteUsersList"]:this.favoriteUsers}},props:["username","favoriteUsers"],methods:{goToUsersPage:function(e){var t=this.$store.getters["auth/username"];e===t?"mypage"===this.$route.name?this.$emit("removeModalInViewFavoriteUsers"):this.$router.push("/mypage"):this.username!==e?this.$router.push({name:"viewUser",params:{username:e}}):this.$emit("removeModalInViewFavoriteUsers")}}},ut=lt,dt=(s("6c52"),Object(u["a"])(ut,nt,ct,!1,null,"4bd3fcea",null)),mt=dt.exports,pt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"panel"},[s("p",{staticClass:"panel-heading"},[e._v("フォロワー")]),s("div",{staticClass:"scroll-block"},e._l(e.followers,(function(t){return s("a",{key:t.id,staticClass:"panel-block columns is-marginless",on:{click:function(s){return e.goToUsersPage(t.username)}}},[s("div",{staticClass:"column is-3-desktop is-4-tablet is-5-mobile"},[s("div",{staticClass:"icon-box"},[s("img",{attrs:{src:t.icon_url,alt:"icon"}})])]),s("div",{staticClass:"column username hidden"},[s("h3",[e._v(e._s(t.username))])])])})),0)])},vt=[],ft={props:["followers","username"],methods:{goToUsersPage:function(e){var t=this.$store.getters["auth/username"];e===t?"mypage"===this.$route.name?this.$emit("removeModalInViewFollowers"):this.$router.push("/mypage"):this.username!==e?this.$router.push({name:"viewUser",params:{username:e}}):this.$emit("removeModalInViewFollowers")}}},ht=ft,gt=(s("4775"),Object(u["a"])(ht,pt,vt,!1,null,null,null)),Ct=gt.exports,yt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tabs is-centered"},[s("ul",e._l(e.tabNameList,(function(t,a){return s("li",{key:t,class:{"is-active":a===e.isActive},on:{click:function(t){return e.switchIsActive(a)}}},[s("a",[e._v(" "+e._s(t)+" ")])])})),0)])},wt=[],bt={props:["routesList","tabNameList","option"],data:function(){return{active:0}},methods:{switchIsActive:function(e){if(this.routesList.length){var t=this.routesList[e];this.$route.name!==t&&this.$router.replace({name:t})}else this.$emit("returnTabIndex",e),this.active=e}},computed:{isActive:function(){return this.routesList.length?this.routesList.indexOf(this.$route.name):this.active}},watch:{option:function(){this.option&&(this.active=this.option,this.$emit("resetOption"))}}},_t=bt,Pt=Object(u["a"])(_t,yt,wt,!1,null,null,null),xt=Pt.exports,kt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"hero welcome is-small"},[s("div",{staticClass:"hero-body columns is-vcentered is-marginless"},[s("div",{staticClass:"column is-2-desktop is-2-tablet"},[s("div",{staticClass:"icon-box"},[s("img",{attrs:{src:e.user.icon_url,alt:"icon"}})])]),s("div",{staticClass:"column is-6-desktop"},[s("h1",{staticClass:"title username-h1"},[e._v(" "+e._s(e.user.username)+" ")])]),s("div",{staticClass:"column",attrs:{id:"button-container"}},[e.isYourPage?s("button",{staticClass:"button is-info is-medium",on:{click:e.goToEditProfilePage}},[e._v(" プロフィールを編集 ")]):[e.isYourFavoriteUser?s("a",{staticClass:"button is-info is-outlined is-medium",on:{click:e.removeFromFavoriteUsers}},[e._v("フォロー解除")]):s("a",{staticClass:"button is-info is-outlined is-medium",on:{click:e.addToFavoriteUsers}},[e._v("ユーザーをフォロー")])]],2)])])},Lt=[],It={props:["user"],computed:{isYourFavoriteUser:function(){var e=this,t=this.$store.getters["auth/favoriteUsersList"];if(t.length){var s=!1;return t.forEach((function(t){t.user_extra_field.username===e.user.username&&(s=!0)})),s}return!1},isYourPage:function(){var e=this.$store.getters["auth/username"];return e===this.user.username}},methods:{addToFavoriteUsers:function(){var e=this;this.$store.getters["auth/isLoggedIn"]?G.post("/following/",{followed_user:this.user.id}).then((function(t){e.$store.dispatch("auth/setFavoriteUser",t.data)})):this.$router.push({name:"login",params:{before:"viewPost"}})},removeFromFavoriteUsers:function(){var e=this,t=this.$store.getters["auth/favoriteUsersList"],s={};t.forEach((function(t){t.user_extra_field.username===e.user.username&&(s=t)})),G.delete("/following/"+s.id+"/").then((function(){e.$store.dispatch("auth/removeFavoriteUser",s)}))},goToEditProfilePage:function(){this.$router.push({name:"editProfile"})}}},$t=It,Ft=(s("df62"),Object(u["a"])($t,kt,Lt,!1,null,"c5e0e3d6",null)),Mt=Ft.exports,At={data:function(){return{routeName:["mypage","myPosts","favoritePosts"],tabName:["プロフィール","自分の投稿","お気に入りの投稿"],user:{},favoriteUsers:[],followers:[],modalInfo:{hideWindow:!0,slotName:""}}},components:{GlobalMenu:re,GlobalMessage:de,MyProfile:ot,ModalWindow:te,ViewFavoriteUsers:mt,ViewFollowers:Ct,TabMenu:xt,UserProfileArea:Mt},methods:{showFollowersInMyPage:function(e){this.followers=e,this.modalInfo.slotName="followers",this.modalInfo.hideWindow=!1},showFavoriteUsersInMyPage:function(){this.modalInfo.slotName="favoriteUsers",this.modalInfo.hideWindow=!1},removeModalWindowInMyPage:function(){this.modalInfo.slotName="",this.modalInfo.hideWindow=!0},goToAnotherTab:function(e){var t=this.routeName[e];this.$router.push({name:t})}},mounted:function(){var e=this,t=this.routeName.indexOf(this.$route.name);this.isActive=t,G.get("/auth/users/me/").then((function(t){e.user=t.data}))},computed:{isMyPageRoute:function(){return"mypage"===this.$route.name}}},Nt=At,Ot=(s("9b87"),Object(u["a"])(Nt,Be,He,!1,null,"1f205b30",null)),Ut=Ot.exports,Et=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.myPosts.length?s("div",[s("PostsList",{attrs:{posts:e.myPosts}}),s("Pagination",{staticClass:"mt-5",attrs:{id:""},on:{paginate:function(t){return e.setMyPosts(t)}}})],1):s("div",[e._v(" "+e._s(e.noPosts)+" ")])},St=[],jt={components:{Pagination:Ce,PostsList:Me},data:function(){return{myPosts:[],noPosts:""}},mounted:function(){var e=this;G.get("/users_post/").then((function(t){t.data.results.length?(e.myPosts=t.data.results,e.$store.dispatch("pagination/setPagination",t.data)):e.noPosts="投稿はありません。"}))},methods:{setMyPosts:function(e){this.myPosts=e}}},Tt=jt,Dt=Object(u["a"])(Tt,Et,St,!1,null,null,null),Wt=Dt.exports,Gt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.favoritePostsList.length?s("div",[s("PostsList",{attrs:{posts:e.favoritePostsList}}),s("Pagination",{staticClass:"mt-5",attrs:{id:""},on:{paginate:function(t){return e.setMyFavorites(t)}}})],1):s("div",[e._v(" "+e._s(e.noFavorites)+" ")])},Kt=[],zt={components:{Pagination:Ce,PostsList:Me},created:function(){var e=this;G.get("/favorite_posts/").then((function(t){t.data.results.length?(e.favoritePostsList=t.data.results,e.$store.dispatch("pagination/setPagination",t.data)):e.noFavorites="お気に入りの投稿はありません。"}))},data:function(){return{favoritePostsList:[],noFavorites:""}},methods:{setMyFavorites:function(e){this.favoritePostsList=e}}},Rt=zt,Vt=Object(u["a"])(Rt,Gt,Kt,!1,null,null,null),qt=Vt.exports,Bt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("GlobalMenu"),s("GlobalMessage"),s("div",{staticClass:"hero-body",attrs:{id:"view-post-container"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"columns is-vcentered has-text-centered is-marginless"},[s("div",{staticClass:"column"},[s("img",{staticClass:"post-image",attrs:{src:e.post.picture_url,alt:e.post.title}})]),s("div",{staticClass:"column"},[s("p",{staticClass:"title"},[e._v(e._s(e.post.title))]),s("p",[e._v("posted by "+e._s(e.returnAuthor.username))]),s("div",{attrs:{id:"favorite-button-container"}},[s("div",[e.isYourFavoritePost?s("a",{staticClass:"button is-medium is-info is-outlined",on:{click:e.removeFromFavorites}},[e._v("お気に入り解除")]):s("a",{staticClass:"button is-medium is-info is-outlined",on:{click:e.addToFavorites}},[e._v("お気に入りに追加")])]),s("div",{staticClass:"mt-4"},[e.isAuthor?[e.isLoggedIn&&e.isYourPost?s("a",{staticClass:"button is-primary is-medium",on:{click:e.editPost}},[e._v("投稿を編集")]):e._e()]:[e.isYourFavoriteUser?s("a",{staticClass:"button is-medium is-info is-outlined",on:{click:e.removeFromFavoriteUsers}},[e._v("フォロー解除")]):s("a",{staticClass:"button is-medium is-info is-outlined",on:{click:e.addToFavoriteUsers}},[e._v("ユーザーをフォロー")])]],2)])])]),s("div",{staticClass:"columns min-height mb-5 mt-6 border-top border-bottom is-marginless"},[s("div",{staticClass:"column is-paddingless mt-2 min-height"},[s("h6",{staticClass:"mb-2 title-h6"},[e._v("投稿者")]),s("div",{staticClass:"display-flex"},[s("div",{staticClass:"icon-box mr-3 click-cursor",on:{click:function(t){return e.moveUserPage(e.returnAuthor.username)}}},[s("img",{attrs:{src:e.returnAuthor.icon_url}})]),s("div",{staticClass:"click-cursor",on:{click:function(t){return e.moveUserPage(e.returnAuthor.username)}}},[s("p",[e._v(e._s(e.returnAuthor.username))])])])]),s("div",{staticClass:"column is-paddingless mt-2"},[s("h6",{staticClass:"mb-2 title-h6"},[e._v("投稿日")]),s("p",[e._v(e._s(e.post.posted_date))])])]),s("div",{staticClass:"min-height mb-4"},[s("h6",{staticClass:"mb-2 title-h6"},[e._v("説明")]),s("p",[e._v(e._s(e.post.text))])]),s("div",{staticClass:"min-height mb-4"},[s("h6",{staticClass:"mb-2 title-h6"},[e._v("カテゴリー")]),e._l(e.post.category,(function(t){return s("span",{key:t,staticClass:"tag is-info is-medium mb-2 mr-2"},[e._v(" "+e._s(t)+" ")])}))],2),s("div",{staticClass:"min-height mb-4"},[s("h6",{staticClass:"mb-2 title-h6"},[e._v("写真撮影場所")]),s("p",[e._v(e._s(e.post.zip_code))]),s("p",[e._v(e._s(e.post.prefecture)+e._s(e.post.location))])])])])],1)},Ht=[],Yt=(s("caad"),s("2532"),s("fb6a"),{computed:{isLoggedIn:function(){return this.$store.getters["auth/isLoggedIn"]},isYourPost:function(){var e=this.$store.getters["auth/username"];return e===this.returnAuthor.username},isYourFavoritePost:function(){var e=this.$store.getters["auth/favoritePostsIdList"];return!!e.length&&e.includes(this.id)},isYourFavoriteUser:function(){var e=this,t=this.$store.getters["auth/favoriteUsersList"],s=!1;return t.length?(t.forEach((function(t){t.user_extra_field.username===e.returnAuthor.username&&(s=!0)})),s):s},returnAuthor:function(){return this.post.author?this.post.author:{}},isAuthor:function(){var e=this.$store.getters["auth/username"];return this.returnAuthor.username===e}},components:{GlobalMenu:re,GlobalMessage:de},props:["id"],data:function(){return{post:{}}},mounted:function(){var e=this;W.get("/posts/"+this.id+"/").then((function(t){e.post=t.data}))},methods:{moveUserPage:function(e){this.$router.push({name:"viewUser",params:{username:e}})},editPost:function(){this.$router.push({name:"edit",params:{id:this.id}})},addToFavorites:function(){var e=this;if(this.$store.getters["auth/isLoggedIn"]){var t=this.$store.getters["auth/favoritePostsIdList"].slice();t.push(this.id),G.patch("/custom_users/"+this.$store.getters["auth/username"]+"/",{favorite_posts:t}).then((function(){e.$store.dispatch("auth/setFavoritePostsIdList",t)}))}else this.$router.push({name:"login",params:{before:"viewPost"}})},removeFromFavorites:function(){var e=this,t=this.$store.getters["auth/favoritePostsIdList"],s=t.filter((function(t){return t!==e.id}));G.patch("/custom_users/"+this.$store.getters["auth/username"]+"/",{favorite_posts:s}).then((function(){e.$store.dispatch("auth/removeFavoritePost",e.id)}))},addToFavoriteUsers:function(){var e=this;this.$store.getters["auth/isLoggedIn"]?G.post("/following/",{followed_user:this.returnAuthor.id}).then((function(t){e.$store.dispatch("auth/setFavoriteUser",t.data)})):this.$router.push({name:"login",params:{before:"viewPost"}})},removeFromFavoriteUsers:function(){var e=this,t=this.$store.getters["auth/favoriteUsersList"],s={};t.forEach((function(t){t.user_extra_field.username===e.returnAuthor.username&&(s=t)})),G.delete("/following/"+s.id+"/").then((function(){e.$store.dispatch("auth/removeFavoriteUser",s)}))}}}),Zt=Yt,Xt=(s("3ce8"),Object(u["a"])(Zt,Bt,Ht,!1,null,"59fb5fdc",null)),Jt=Xt.exports,Qt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("ModalWindow",{attrs:{showWindow:e.modalInfo},on:{removeWindow:e.removeModalWindow},scopedSlots:e._u([{key:"favoriteUsers",fn:function(){return[s("ViewFavoriteUsers",{attrs:{username:e.username,favoriteUsers:e.favoriteUsers},on:{removeModalInViewFavoriteUsers:e.removeModalWindow}})]},proxy:!0},{key:"followers",fn:function(){return[s("ViewFollowers",{attrs:{followers:e.followers,username:e.username},on:{removeModalInViewFollowers:e.removeModalWindow}})]},proxy:!0}])}),s("GlobalMenu"),s("GlobalMessage"),s("div",{attrs:{id:"view-user-container"}},[s("div",{staticClass:"container"},[s("UserProfileArea",{attrs:{user:e.user}}),s("section",{staticClass:"info-tiles mb-5"},[s("div",{staticClass:"tile is-ancestor has-text-centered"},[s("div",{staticClass:"tile is-parent"},[s("article",{staticClass:"tile is-child box click-cursor",on:{click:function(t){return e.switchTab(1)}}},[s("p",{staticClass:"title"},[e._v(e._s(e.usersPostsCount))]),s("p",{staticClass:"subtitle"},[e._v("投稿数")])])]),s("div",{staticClass:"tile is-parent"},[s("article",{staticClass:"tile is-child box click-cursor",on:{click:e.showFollowers}},[s("p",{staticClass:"title"},[e._v(e._s(e.followCount))]),s("p",{staticClass:"subtitle"},[e._v("フォロワ―")])])]),s("div",{staticClass:"tile is-parent"},[s("article",{staticClass:"tile is-child box click-cursor",on:{click:e.showFavoriteUsers}},[s("p",{staticClass:"title"},[e._v(e._s(e.favoriteUsersCount))]),s("p",{staticClass:"subtitle"},[e._v("フォロー")])])])])]),s("TabMenu",{attrs:{tabNameList:e.tabNameInViewUserPage,routesList:[],option:e.optionNumber},on:{returnTabIndex:function(t){return e.switchElement(t)},resetOption:e.resetOptionNumber}}),s("UserOverview",{directives:[{name:"show",rawName:"v-show",value:0===e.elementNumber,expression:"elementNumber === 0"}],attrs:{user:e.user}}),s("div",{directives:[{name:"show",rawName:"v-show",value:1===e.elementNumber,expression:"elementNumber === 1"}]},[e.usersPosts.length?[s("PostsList",{attrs:{posts:e.usersPosts}}),s("Pagination",{staticClass:"mt-5",attrs:{id:e.user.id},on:{paginate:function(t){return e.setPosts(t)}}})]:[e._v(" "+e._s(e.noPosts)+" ")]],2)],1)])],1)},es=[],ts={components:{GlobalMenu:re,GlobalMessage:de,ModalWindow:te,ViewFavoriteUsers:mt,ViewFollowers:Ct,TabMenu:xt,PostsList:Me,Pagination:Ce,UserProfileArea:Mt,UserOverview:st},mounted:function(){var e=this;W.get("/custom_users/"+this.username+"/").then((function(t){e.user=t.data,W.get("/following/?other="+e.user.id).then((function(t){t.data.forEach((function(t){e.favoriteUsers.push(t)})),e.favoriteUsersCount=t.data.length})),W.get("/following/?followers=True&user="+e.user.id).then((function(t){t.data.forEach((function(t){e.followers.push(t.followed_by)})),e.followCount=t.data.length})),W.get("/posts/",{params:{user_id:e.user.id}}).then((function(t){t.data.results.length?(e.usersPosts=t.data.results,e.usersPostsCount=t.data.count,e.$store.dispatch("pagination/setPagination",t.data)):e.noPosts="投稿はありません。"}))}))},props:["username"],data:function(){return{user:{},usersPosts:[],usersPostsCount:0,followers:[],followCount:0,favoriteUsers:[],favoriteUsersCount:0,modalInfo:{hideWindow:!0,slotName:""},tabNameInViewUserPage:["プロフィール","投稿一覧"],elementNumber:0,optionNumber:!1,noPosts:""}},methods:{showFollowers:function(){this.modalInfo.slotName="followers",this.modalInfo.hideWindow=!1},showFavoriteUsers:function(){this.modalInfo.slotName="favoriteUsers",this.modalInfo.hideWindow=!1},removeModalWindow:function(){this.modalInfo.slotName="",this.modalInfo.hideWindow=!0},switchElement:function(e){this.elementNumber=e},setPosts:function(e){this.usersPosts=e},switchTab:function(e){this.elementNumber!==e&&(this.optionNumber=e,this.elementNumber=e)},resetOptionNumber:function(){this.optionNumber=!1}},beforeRouteEnter:function(e,t,s){var a=T.getters["auth/username"];e.params.username===a?s("/mypage"):s()}},ss=ts,as=(s("844c"),Object(u["a"])(ss,Qt,es,!1,null,"7f83a0ae",null)),is=as.exports,rs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("GlobalMenu"),s("GlobalMessage"),s("div",{staticClass:"container mt-6 mb-6",attrs:{id:"post-container"}},[s("div",{staticClass:"columns is-centered"},[s("form",{staticClass:"box column is-5-desktop is-6-tablet is-8-mobile",attrs:{id:"post-form"},on:{submit:function(t){return t.preventDefault(),e.createPost(t)}}},[s("div",{attrs:{id:"form-container"}},[e._m(0),s("PostImageForm",{attrs:{defaultSrc:"",defaultFileName:""},on:{changeImage:function(t){return e.setImageFile(t)}}}),s("div",{staticClass:"field mt-5"},[s("div",{staticClass:"control pt-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newPost.title,expression:"newPost.title"}],staticClass:"input",attrs:{type:"text",placeholder:"タイトルを入力"},domProps:{value:e.newPost.title},on:{input:function(t){t.target.composing||e.$set(e.newPost,"title",t.target.value)}}})])]),s("div",{staticClass:"field mt-5"},[s("div",{staticClass:"control pt-3"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newPost.text,expression:"newPost.text"}],staticClass:"textarea",attrs:{placeholder:"説明文を入力"},domProps:{value:e.newPost.text},on:{input:function(t){t.target.composing||e.$set(e.newPost,"text",t.target.value)}}})])]),s("PostCategoryForm",{attrs:{defaultCategorys:[]},on:{changeSelectedCategorys:function(t){return e.setCategorys(t)}}}),s("PostLocationForm",{on:{"send-zip":function(t){return e.saveZip(t)},"send-prefecture":function(t){return e.savePrefecture(t)},"send-location":function(t){return e.saveLocation(t)}}}),s("PostStatusForm",{on:{changeRadio:function(t){return e.setStatus(t)}}}),e._m(1)],1)])])])],1)},os=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content mt-6"},[s("h1",{staticClass:"has-text-centered"},[e._v("Post Form")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field is-grouped mt-5 mb-2"},[s("button",{staticClass:"button button-border is-primary is-fullwidth"},[e._v(" 投稿する ")])])}],ns=s("3835"),cs=(s("4fad"),s("466d"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field mt-5 mb-1"},[s("label",{staticClass:"label"},[e._v("写真撮影住所")]),s("div",{staticClass:"control mt-4"},[s("label",{staticClass:"label-font",attrs:{for:"zip"}},[e._v("郵便番号（半角, ハイフンなし）")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.zip,expression:"zip"}],staticClass:"input mt-2",attrs:{id:"zip",type:"text"},domProps:{value:e.zip},on:{input:function(t){t.target.composing||(e.zip=t.target.value)}}})]),s("div",{staticClass:"control mt-4"},[s("label",{staticClass:"label-font",attrs:{for:"pref"}},[e._v("都道府県")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.prefecture,expression:"prefecture"}],staticClass:"input mt-2",attrs:{id:"pref",type:"text"},domProps:{value:e.prefecture},on:{input:function(t){t.target.composing||(e.prefecture=t.target.value)}}})]),s("div",{staticClass:"control mt-4"},[s("label",{staticClass:"label-font",attrs:{for:"address"}},[e._v("市区町村・番地")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.address,expression:"address"}],staticClass:"input mt-2",attrs:{id:"address",type:"text"},domProps:{value:e.address},on:{input:function(t){t.target.composing||(e.address=t.target.value)}}})])])}),ls=[],us=s("db80"),ds={props:["postZipCode","postPrefecture","postLocation"],data:function(){return{zip:"",prefecture:"",address:""}},watch:{zip:function(e){var t=this,s=this;e&&!e.match(/[^0-9０-９]/g)?new us.Core(e,(function(a){s.prefecture=a.region,s.address=a.locality+a.street,t.$emit("send-zip",e)})):(s.prefecture="",s.address="",this.$emit("send-zip",e))},prefecture:function(e){this.$emit("send-prefecture",e)},address:function(e){this.$emit("send-location",e)},postZipCode:function(e){this.zip=e},postPrefecture:function(e){this.prefecture=e},postLocation:function(e){this.address=e}}},ms=ds,ps=(s("d3c6"),Object(u["a"])(ms,cs,ls,!1,null,"59db7a31",null)),vs=ps.exports,fs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field mt-5 vertical-align"},[s("div",{staticClass:"control"},[s("label",{staticClass:"radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.status,expression:"status"}],attrs:{type:"radio",value:"public"},domProps:{checked:e._q(e.status,"public")},on:{change:[function(t){e.status="public"},e.clickRadioButton]}}),e._v(" 公開 ")]),s("label",{staticClass:"radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.status,expression:"status"}],attrs:{type:"radio",value:"private"},domProps:{checked:e._q(e.status,"private")},on:{change:[function(t){e.status="private"},e.clickRadioButton]}}),e._v(" 非公開 ")])])])},hs=[],gs={data:function(){return{status:"public"}},methods:{clickRadioButton:function(){this.$emit("changeRadio",this.status)}}},Cs=gs,ys=(s("5d71"),Object(u["a"])(Cs,fs,hs,!1,null,"35cfd134",null)),ws=ys.exports,bs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field mt-5 pt-2 pb-5"},[s("label",{staticClass:"label pt-1"},[e._v("カテゴリー")]),s("div",{staticClass:"select is-info mb-5"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.parentCategory,expression:"parentCategory"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.parentCategory=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[e._v("指定なし")]),s("option",[e._v("建物・人工物")]),s("option",[e._v("自然")])])]),s("div",{staticClass:"vertical-align"},[s("p",{directives:[{name:"show",rawName:"v-show",value:e.parentCategory,expression:"parentCategory"}],staticClass:"help mb-1"},[e._v(" 以下からカテゴリーを選択してください。 ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:"建物・人工物"===e.parentCategory,expression:"parentCategory === '建物・人工物'"}]},[s("label",{staticClass:"checkbox mr-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategory,expression:"selectedCategory"}],attrs:{value:"道路",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategory)?e._i(e.selectedCategory,"道路")>-1:e.selectedCategory},on:{change:function(t){var s=e.selectedCategory,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="道路",o=e._i(s,r);a.checked?o<0&&(e.selectedCategory=s.concat([r])):o>-1&&(e.selectedCategory=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategory=i}}}),e._v(" 道路 ")]),s("label",{staticClass:"checkbox mr-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategory,expression:"selectedCategory"}],attrs:{value:"商業施設",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategory)?e._i(e.selectedCategory,"商業施設")>-1:e.selectedCategory},on:{change:function(t){var s=e.selectedCategory,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="商業施設",o=e._i(s,r);a.checked?o<0&&(e.selectedCategory=s.concat([r])):o>-1&&(e.selectedCategory=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategory=i}}}),e._v(" 商業施設 ")]),s("label",{staticClass:"checkbox mr-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategory,expression:"selectedCategory"}],attrs:{value:"ビル",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategory)?e._i(e.selectedCategory,"ビル")>-1:e.selectedCategory},on:{change:function(t){var s=e.selectedCategory,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="ビル",o=e._i(s,r);a.checked?o<0&&(e.selectedCategory=s.concat([r])):o>-1&&(e.selectedCategory=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategory=i}}}),e._v(" ビル ")]),s("label",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategory,expression:"selectedCategory"}],attrs:{value:"寺・神社",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategory)?e._i(e.selectedCategory,"寺・神社")>-1:e.selectedCategory},on:{change:function(t){var s=e.selectedCategory,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="寺・神社",o=e._i(s,r);a.checked?o<0&&(e.selectedCategory=s.concat([r])):o>-1&&(e.selectedCategory=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategory=i}}}),e._v(" 寺・神社 ")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:"自然"===e.parentCategory,expression:"parentCategory === '自然'"}]},[s("label",{staticClass:"checkbox mr-5"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategory,expression:"selectedCategory"}],attrs:{value:"山",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategory)?e._i(e.selectedCategory,"山")>-1:e.selectedCategory},on:{change:function(t){var s=e.selectedCategory,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="山",o=e._i(s,r);a.checked?o<0&&(e.selectedCategory=s.concat([r])):o>-1&&(e.selectedCategory=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategory=i}}}),e._v(" 山 ")]),s("label",{staticClass:"checkbox mr-5"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategory,expression:"selectedCategory"}],attrs:{value:"海",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategory)?e._i(e.selectedCategory,"海")>-1:e.selectedCategory},on:{change:function(t){var s=e.selectedCategory,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="海",o=e._i(s,r);a.checked?o<0&&(e.selectedCategory=s.concat([r])):o>-1&&(e.selectedCategory=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategory=i}}}),e._v(" 海 ")]),s("label",{staticClass:"checkbox mr-5"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategory,expression:"selectedCategory"}],attrs:{value:"空",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategory)?e._i(e.selectedCategory,"空")>-1:e.selectedCategory},on:{change:function(t){var s=e.selectedCategory,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="空",o=e._i(s,r);a.checked?o<0&&(e.selectedCategory=s.concat([r])):o>-1&&(e.selectedCategory=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategory=i}}}),e._v(" 空 ")]),s("label",{staticClass:"checkbox mr-5"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategory,expression:"selectedCategory"}],attrs:{value:"湖",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategory)?e._i(e.selectedCategory,"湖")>-1:e.selectedCategory},on:{change:function(t){var s=e.selectedCategory,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="湖",o=e._i(s,r);a.checked?o<0&&(e.selectedCategory=s.concat([r])):o>-1&&(e.selectedCategory=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategory=i}}}),e._v(" 湖 ")]),s("label",{staticClass:"checkbox mr-5"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategory,expression:"selectedCategory"}],attrs:{value:"星",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategory)?e._i(e.selectedCategory,"星")>-1:e.selectedCategory},on:{change:function(t){var s=e.selectedCategory,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="星",o=e._i(s,r);a.checked?o<0&&(e.selectedCategory=s.concat([r])):o>-1&&(e.selectedCategory=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategory=i}}}),e._v(" 星 ")]),s("label",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategory,expression:"selectedCategory"}],attrs:{value:"森林",type:"checkbox"},domProps:{checked:Array.isArray(e.selectedCategory)?e._i(e.selectedCategory,"森林")>-1:e.selectedCategory},on:{change:function(t){var s=e.selectedCategory,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r="森林",o=e._i(s,r);a.checked?o<0&&(e.selectedCategory=s.concat([r])):o>-1&&(e.selectedCategory=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedCategory=i}}}),e._v(" 森林 ")])])]),s("div",{staticClass:"mt-3"},[s("p",{staticClass:"help"},[e._v("選択したカテゴリー")]),s("input",{staticClass:"input",attrs:{id:"readonly-input",type:"text",readonly:""},domProps:{value:e.selectedCategoryValue}})])])},_s=[],Ps={props:["defaultCategorys"],data:function(){return{parentCategory:"",selectedCategory:[],artificial:["道路","商業施設","ビル","寺・神社"],nature:["山","海","空","湖","星","森林"]}},computed:{selectedCategoryValue:function(){if(this.parentCategory){var e,t="",s=this.selectedCategory.slice(-1)[0],a=Object(ve["a"])(this.selectedCategory);try{for(a.s();!(e=a.n()).done;){var i=e.value;t+=i===s?i:i+", "}}catch(r){a.e(r)}finally{a.f()}return this.parentCategory+" >  "+t}return""}},watch:{parentCategory:function(){this.defaultCategorys.length?this.$emit("clearDefaultCategorys"):this.selectedCategory=[]},selectedCategory:function(){this.$emit("changeSelectedCategorys",this.selectedCategory);var e=document.getElementById("readonly-input");this.selectedCategory.length?e.classList.add("is-info"):e.classList.remove("is-info")},defaultCategorys:function(e){this.nature.includes(e[0])?(this.parentCategory="自然",this.selectedCategory=e):this.artificial.includes(e[0])&&(this.parentCategory="建物・人工物",this.selectedCategory=e)}}},xs=Ps,ks=(s("3b8f"),Object(u["a"])(xs,bs,_s,!1,null,"23e43962",null)),Ls=ks.exports,Is=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"img-box"},[s("img",{attrs:{src:e.previewSrc}})]),s("div",{staticClass:"file has-name is-fullwidth pt-3"},[s("label",{staticClass:"file-label"},[s("input",{staticClass:"file-input",attrs:{type:"file",name:"resume"},on:{change:e.onImageChange}}),s("span",{staticClass:"file-cta"},[s("span",{staticClass:"file-icon"},[s("fa-icon",{attrs:{icon:"file-upload"}})],1),s("span",{staticClass:"file-label"},[e._v(" 画像を選択 ")])]),s("span",{staticClass:"file-name"},[e._v(e._s(this.fileName))])])])])},$s=[],Fs={props:["defaultSrc","defaultFileName"],data:function(){return{previewSrc:"",picture:null,fileName:""}},methods:{getFileData:function(e){var t=this;return new Promise((function(s,a){t.picture=e,t.fileName=e.name;var i=new FileReader;i.readAsDataURL(e),i.onload=function(){return s(i.result)},i.onerror=function(e){return a(e)}}))},onImageChange:function(e){var t=this,s=e.target.files||e.dataTransfer.files;this.getFileData(s[0]).then((function(e){t.previewSrc=e,t.$emit("changeImage",t.picture)})).catch((function(){var e="画像のアップロードに失敗しました。";t.$store.dispatch("message/setErrorMessage",{message:e})}))}},watch:{defaultSrc:function(e){this.defaultSrc&&(this.previewSrc=e)},defaultFileName:function(e){this.defaultFileName&&(this.fileName=e)}}},Ms=Fs,As=(s("a1d5"),Object(u["a"])(Ms,Is,$s,!1,null,"34f4b5ee",null)),Ns=As.exports,Os={components:{GlobalMenu:re,GlobalMessage:de,PostLocationForm:vs,PostStatusForm:ws,PostCategoryForm:Ls,PostImageForm:Ns},data:function(){return{newPost:{picture:null,title:"",text:"",status:"public"},selectedCategory:[],zipCode:"",prefecture:"",location:""}},methods:{setImageFile:function(e){this.newPost.picture=e},setCategorys:function(e){this.selectedCategory=e},setStatus:function(e){this.newPost.status=e},createPost:function(){var e=this,t=new FormData;Object.entries(this.newPost).forEach((function(e){var s=Object(ns["a"])(e,2),a=s[0],i=s[1];t.append(a,i)})),this.selectedCategory.forEach((function(e){t.append("category",e)})),t.append("zip_code",this.zipCode),t.append("prefecture",this.prefecture),t.append("location",this.location),G.post("/users_post/",t).then((function(){e.$router.push({name:"home",params:{before:"create"}})}))},saveZip:function(e){if(e.match(/[^0-9０-９]/g))this.zipCode="";else{var t=e.replace(/[０-９]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}));this.zipCode=t}},savePrefecture:function(e){this.prefecture=e},saveLocation:function(e){this.location=e}}},Us=Os,Es=(s("6a9b"),Object(u["a"])(Us,rs,os,!1,null,"4bffbe1a",null)),Ss=Es.exports,js=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("GlobalMenu"),s("GlobalMessage"),s("div",{staticClass:"container mt-6 mb-6",attrs:{id:"edit-container"}},[s("div",{staticClass:"columns is-centered"},[s("form",{staticClass:"box column is-5-desktop is-6-tablet is-8-mobile",attrs:{id:"edit-form"},on:{submit:function(e){e.preventDefault()}}},[s("div",{attrs:{id:"form-container"}},[e._m(0),s("PostImageForm",{attrs:{defaultSrc:e.post.picture_url,defaultFileName:e.post.picture_filename},on:{changeImage:function(t){return e.setImageFile(t)}}}),s("div",{staticClass:"field mt-5"},[s("div",{staticClass:"control pt-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.post.title,expression:"post.title"}],staticClass:"input",attrs:{type:"text",placeholder:"タイトルを入力"},domProps:{value:e.post.title},on:{input:function(t){t.target.composing||e.$set(e.post,"title",t.target.value)}}})])]),s("div",{staticClass:"field mt-5"},[s("div",{staticClass:"control pt-3"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.post.text,expression:"post.text"}],staticClass:"textarea",attrs:{placeholder:"説明文を入力"},domProps:{value:e.post.text},on:{input:function(t){t.target.composing||e.$set(e.post,"text",t.target.value)}}})])]),s("PostCategoryForm",{attrs:{defaultCategorys:e.defaultCategorysList},on:{changeSelectedCategorys:function(t){return e.setCategorys(t)},clearDefaultCategorys:e.clearDefaultCategorysList}}),s("PostLocationForm",{attrs:{postZipCode:e.post.zip_code,postPrefecture:e.post.prefecture,postLocation:e.post.location},on:{"send-zip":function(t){return e.saveZipInEdit(t)},"send-prefecture":function(t){return e.savePrefectureInEdit(t)},"send-location":function(t){return e.saveLocationInEdit(t)}}}),s("PostStatusForm",{on:{changeRadio:function(t){return e.setStatus(t)}}}),s("div",{staticClass:"field is-grouped mt-5 mb-2"},[s("button",{staticClass:"button button-border is-primary is-fullwidth",on:{click:e.editPost}},[e._v(" 投稿を編集する ")])]),s("hr"),s("div",{staticClass:"field mt-5"},[s("label",{staticClass:"label"},[e._v("投稿を削除")]),s("div",{staticClass:"control"},[s("p",{staticClass:"help"},[e._v(" 投稿を削除する場合は「削除」と入力してください。 ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.deleteText,expression:"deleteText"}],staticClass:"input",attrs:{type:"text",placeholder:"削除"},domProps:{value:e.deleteText},on:{input:function(t){t.target.composing||(e.deleteText=t.target.value)}}})])]),s("div",{staticClass:"field is-grouped mt-5 mb-2"},[s("button",{staticClass:"button is-danger is-fullwidth button-border",attrs:{disabled:!e.isInput},on:{click:e.deletePost}},[e._v(" 削除 ")])])],1)])])])],1)},Ts=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content mt-6"},[s("h1",{staticClass:"has-text-centered"},[e._v("Edit Form")])])}],Ds={data:function(){return{post:{},deleteText:"",defaultCategorysList:[],zipCodeInEditForm:"",prefectureDataInEditForm:"",locationDataInEditForm:"",newPicture:null}},computed:{isInput:function(){return"削除"===this.deleteText}},components:{GlobalMenu:re,GlobalMessage:de,PostLocationForm:vs,PostStatusForm:ws,PostCategoryForm:Ls,PostImageForm:Ns},props:["id"],mounted:function(){var e=this;G.get("/posts/"+this.id+"/").then((function(t){e.post=t.data,e.defaultCategorysList=t.data.category}))},methods:{setImageFile:function(e){this.newPicture=e},setCategorys:function(e){this.post.category=e},clearDefaultCategorysList:function(){this.defaultCategorysList=[]},setStatus:function(e){this.post.status=e},editPost:function(){var e=this,t=new FormData;delete this.post.picture_url,delete this.post.picture_filename,delete this.post.picture,Object.entries(this.post).forEach((function(e){var s=Object(ns["a"])(e,2),a=s[0],i=s[1];"category"===a?i.forEach((function(e){t.append("category",e)})):t.append(a,i)})),this.newPicture&&t.append("picture",this.newPicture),t.append("zip_code",this.zipCodeInEditForm),t.append("prefecture",this.prefectureDataInEditForm),t.append("location",this.locationDataInEditForm),G.patch("/posts/"+this.id+"/",t).then((function(){"private"===e.post.status?e.$router.replace({name:"home"}):e.$router.replace({name:"viewPost",params:{id:e.id}})}))},deletePost:function(){var e=this;G.delete("/posts/"+this.id+"/").then((function(){e.$router.replace("/")}))},saveZipInEdit:function(e){if(e&&!e.match(/[^0-9０-９]/g)){var t=e.replace(/[０-９]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}));this.zipCodeInEditForm=t}else this.zipCodeInEditForm=""},savePrefectureInEdit:function(e){this.prefectureDataInEditForm=e},saveLocationInEdit:function(e){this.locationDataInEditForm=e}}},Ws=Ds,Gs=(s("8a03"),Object(u["a"])(Ws,js,Ts,!1,null,"67b62584",null)),Ks=Gs.exports,zs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("GlobalMenu"),s("GlobalMessage"),s("div",{staticClass:"container mt-6",attrs:{id:"edit-profile-container"}},[s("div",{staticClass:"columns is-centered is-vcentered"},[s("form",{staticClass:"box column is-5-desktop is-6-tablet is-8-mobile",attrs:{id:"profile-form"},on:{submit:function(t){return t.preventDefault(),e.clickEditProfile(t)}}},[s("div",{staticClass:"form-container"},[s("div",{staticClass:"field mt-4"},[s("div",{staticClass:"icon-box"},[s("img",{attrs:{src:e.iconSrc,alt:"icon"}})])]),s("div",{staticClass:"file has-name is-fullwidth mt-5"},[s("label",{staticClass:"file-label"},[s("input",{staticClass:"file-input",attrs:{type:"file",name:"resume"},on:{change:e.onIconChange}}),s("span",{staticClass:"file-cta",attrs:{id:"image-select"}},[s("span",{staticClass:"file-icon"},[s("fa-icon",{attrs:{icon:"file-upload"}})],1),s("span",{staticClass:"file-label"},[e._v(" 画像を選択 ")])]),s("span",{staticClass:"file-name"},[e._v(e._s(this.iconFileName))])])]),s("div",{staticClass:"field mt-4"},[s("label",{staticClass:"label"},[e._v("ユーザー名")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],staticClass:"input",attrs:{type:"text",placeholder:"ユーザー名を入力"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}})])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("自己紹介")]),s("div",{staticClass:"control"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.user.self_introduction,expression:"user.self_introduction"}],staticClass:"textarea",attrs:{placeholder:"例）よろしくお願いします。"},domProps:{value:e.user.self_introduction},on:{input:function(t){t.target.composing||e.$set(e.user,"self_introduction",t.target.value)}}})])]),s("button",{staticClass:"button is-primary is-fullwidth",attrs:{id:"profile-button"}},[e._v(" プロフィールを編集する ")])])])])])],1)},Rs=[],Vs={components:{GlobalMenu:re,GlobalMessage:de},data:function(){return{user:{},newIconSrc:"",newIcon:null,iconFileNameInData:""}},mounted:function(){var e=this;G.get("/auth/users/me/").then((function(t){e.user=t.data}))},computed:{iconSrc:function(){return this.newIconSrc?this.newIconSrc:this.user.icon_url},iconFileName:function(){return this.iconFileNameInData?this.iconFileNameInData:"default_user_icon.jpeg"===this.user.icon_filename?"デフォルト":this.user.icon_filename}},methods:{getFileData:function(e){var t=this;return new Promise((function(s,a){t.newIcon=e,t.iconFileNameInData=e.name;var i=new FileReader;i.readAsDataURL(e),i.onload=function(){return s(i.result)},i.onerror=function(e){return a(e)}}))},onIconChange:function(e){var t=this,s=e.target.files||e.dataTransfer.files;this.getFileData(s[0]).then((function(e){t.newIconSrc=e})).catch((function(){var e="画像のアップロードに失敗しました。";t.$store.dispatch("message/setErrorMessage",{message:e})}))},clickEditProfile:function(){var e=this,t=new FormData,s=["username","self_introduction"];Object.entries(this.user).forEach((function(e){var a=Object(ns["a"])(e,2),i=a[0],r=a[1];s.includes(i)&&t.append(i,r)})),this.newIcon&&t.append("icon",this.newIcon),G.patch("/auth/users/me/",t).then((function(){e.$router.replace({name:"mypage"})}))}}},qs=Vs,Bs=(s("3819"),Object(u["a"])(qs,zs,Rs,!1,null,"d6914062",null)),Hs=Bs.exports;a["a"].use(p["a"]);var Ys=new p["a"]({mode:"history",routes:[{path:"/",component:Ue,name:"home",props:!0},{path:"/post/:id",component:Jt,props:!0,name:"viewPost"},{path:"/create/post",component:Ss,meta:{requiredAuth:!0}},{path:"/edit/post/:id",component:Ks,name:"edit",props:!0,meta:{requiredAuth:!0}},{path:"/signup",component:We},{path:"/login",component:qe,name:"login",props:!0},{path:"/mypage",component:Ut,name:"mypage",meta:{requiredAuth:!0},children:[{path:"myposts",component:Wt,name:"myPosts"},{path:"favorites",component:qt,name:"favoritePosts"}]},{path:"/user/:username",component:is,props:!0,name:"viewUser"},{path:"/edit/profile",component:Hs,name:"editProfile",meta:{requiredAuth:!0}},{path:"*",redirect:"/"}]});function Zs(e,t,s){s({path:"/login/",query:{next:e.fullPath}})}Ys.beforeEach((function(e,t,s){var a=T.getters["auth/isLoggedIn"],i=localStorage.getItem("access");e.matched.some((function(e){return e.meta.requiredAuth}))?a?s():i?T.dispatch("auth/reload").then((function(){s()})).catch((function(){Zs(e,t,s)})):Zs(e,t,s):(i&&T.dispatch("auth/reload"),s())}));var Xs=Ys,Js=(s("92c6"),s("ad3d")),Qs=s("ecee"),ea=s("c074");Qs["c"].add(ea["a"]),a["a"].component("fa-icon",Js["a"]),a["a"].config.productionTip=!1,new a["a"]({router:Xs,store:T,render:function(e){return e(m)}}).$mount("#app")},"5d71":function(e,t,s){"use strict";s("6221")},"602c":function(e,t,s){"use strict";s("fbd8")},6169:function(e,t,s){},6221:function(e,t,s){},"647f":function(e,t,s){},"6a9b":function(e,t,s){"use strict";s("6169")},"6c52":function(e,t,s){"use strict";s("e176")},"71b9":function(e,t,s){},"73c0":function(e,t,s){},7636:function(e,t,s){},"83ec":function(e,t,s){},"844c":function(e,t,s){"use strict";s("c690")},8621:function(e,t,s){},"8a03":function(e,t,s){"use strict";s("f4b1")},"8b6a":function(e,t,s){"use strict";s("b3b8")},"9a67":function(e,t,s){"use strict";s("8621")},"9b87":function(e,t,s){"use strict";s("4de3")},a1d5:function(e,t,s){"use strict";s("1158")},a4de:function(e,t,s){},aa20:function(e,t,s){},b3b8:function(e,t,s){},bfb8:function(e,t,s){},c4f0:function(e,t,s){},c690:function(e,t,s){},d3c6:function(e,t,s){"use strict";s("25fa")},d5cc:function(e,t,s){"use strict";s("41bf")},dcea:function(e,t,s){e.exports=s.p+"../static/img/keshikii_logo2.7eee5aa0.png"},df26:function(e,t,s){"use strict";s("4f9d")},df62:function(e,t,s){"use strict";s("2b52")},e176:function(e,t,s){},e431:function(e,t,s){},e931:function(e,t,s){"use strict";s("71b9")},f4b1:function(e,t,s){},f556:function(e,t,s){"use strict";s("a4de")},fbd8:function(e,t,s){},ff81:function(e,t,s){}});
//# sourceMappingURL=index.7bf869b5.js.map